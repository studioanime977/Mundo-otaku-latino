<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-adsense-account" content="ca-pub-8480825005176665">
  <title>Danmachi - Temporada 1 - StudioOtaku</title>
  <link rel="stylesheet" href="../../../css/temporadas.css">
  <link rel="stylesheet" href="../../../css/style.css">
  <link rel="stylesheet" href="../../../css/anime.css">
  <link rel="stylesheet" href="../../../css/responsive-style.css">
  <link rel="stylesheet" href="../../../css/responsive-navigation.css">
  <link rel="icon" type="image/png" href="../../../ico/logo.png">
  <link rel="apple-touch-icon" href="../../../ico/logo.png">
  <link rel="shortcut icon" href="../../../ico/logo.png">
  <style>
    .main-content { display: flex; gap: 20px; align-items: flex-start; }
    .left-content { flex: 3; }
    .right-content { flex: 1; }
    .back-btn { display: inline-block; margin: 12px 0; padding: 10px 16px; background: #6c63ff; color: #fff; border-radius: 8px; text-decoration: none; }
    .right-content .popular-item { display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.03); margin-bottom: 10px; cursor: pointer; }
    .right-content .popular-item:hover { background: rgba(255,255,255,0.06); }
    .right-content .popular-item img { width: 120px; height: 72px; object-fit: cover; border-radius: 6px; display: block; }
    .right-content .popular-item .title { font-size: 0.95rem; line-height: 1.3; color: #fff; }
    .reproductor-video iframe { width: 100%; height: 480px; border: none; }
    .player-frame-wrap { background: #111; border-radius: 12px; overflow: hidden; }
    .header + main.container { padding-top: 6rem; }

    #player-frame { width: 100%; height: 480px; border: 0; display: block; }
    @media (max-width: 768px) { #player-frame { height: 360px; } }

    .episodes-grid { display: grid; grid-template-columns: repeat(6, minmax(0, 1fr)); gap: 10px; }
    @media (max-width: 900px) { .episodes-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); } }
    @media (max-width: 600px) { .episodes-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
    .episode-btn { padding: 10px 12px; border-radius: 10px; background: rgba(255,255,255,0.06); color: #fff; border: 1px solid rgba(255,255,255,0.10); cursor: pointer; font-weight: 700; }
    .episode-btn:hover { background: rgba(108,99,255,0.25); border-color: rgba(108,99,255,0.60); }
    .episode-btn.active { background: #6c63ff; border-color: #6c63ff; }

    .server-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; margin: 12px 0; }
    .server-card { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 10px; background: rgba(255,255,255,0.04); color: #fff; text-decoration: none; border: 1px solid rgba(255,255,255,0.10); }
    .server-card img { width: 22px; height: 22px; object-fit: contain; }
    .server-card.active { background: rgba(108,99,255,0.25); border-color: rgba(108,99,255,0.65); }

    .language-toggle { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; margin: 12px 0; }
    .lang-btn { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 10px; background: rgba(255,255,255,0.04); color: #fff; border: 1px solid rgba(255,255,255,0.10); cursor: pointer; }
    .lang-btn img { width: 22px; height: 22px; object-fit: contain; }
    .lang-btn.active { background: rgba(108,99,255,0.25); border-color: rgba(108,99,255,0.65); }
    .lang-btn:disabled { opacity: 0.45; cursor: not-allowed; }
  </style>

  <style>
    .footer { margin-top: 28px; padding: 16px 0; background: rgba(255,255,255,0.04); border-top: 1px solid rgba(255,255,255,0.08); }
    .footer .footer-content { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .footer .footer-section h3 { margin: 0 0 8px; }
    .footer .footer-section p { margin: 0; opacity: 0.85; }
    .footer .footer-section ul { list-style: none; padding: 0; margin: 0; }
    .footer .footer-section ul li { margin: 6px 0; }
    .footer .footer-section a { color: #fff; text-decoration: none; }
    .footer .footer-section a:hover { text-decoration: underline; }
    .footer .social-links { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
    @media (min-width:768px){ .footer .social-links { grid-template-columns: repeat(4, 1fr); } }
    .footer .social-item { display: flex; align-items: center; gap: 8px; background: #111; border-radius: 10px; padding: 10px; text-decoration: none; color: #fff; }
    .footer .social-item:hover { background: #1a1a1a; }
    .footer .social-item img { width: 22px; height: 22px; border-radius: 4px; object-fit: cover; }
    .footer .social-item span { line-height: 1; }
    .footer .footer-text { text-align: center; margin-top: 12px; opacity: 0.8; }
    @media (max-width:768px){ .footer .footer-content { grid-template-columns: 1fr; } }
  </style>
</head>

<body>
  <header class="header">
    <nav class="nav-container">
      <div class="logo"><img src="../../../ico/logo.png" alt="Mundo Otaku Latino" style="height:28px; vertical-align:middle; margin-right:8px;">Mundo Otaku Latino</div>
      <ul class="nav-menu">
        <li><a href="../../index.html#inicio">Inicio</a></li>
        <li><a href="../../html/catalogo.html">Anime</a></li>
        <li><a href="#peliculas">PelÃ­culas</a></li>
        <li><a href="#generos">GÃ©neros</a></li>
        <li><a href="https://exe.io/ANIMETV" target="_blank">APK</a></li>
      </ul>
    </nav>
  </header>

  <main class="container">
    <div class="main-content">
      <a href="../../html/catalogo.html" class="back-btn">Volver al CatÃ¡logo</a>
      <div class="left-content">
        <div class="title-container">
          <h1 class="season-title">Danmachi - Temporada 1</h1>
          <h2 class="episode-title" id="current-episode-title">Episodio 1</h2>
        </div>
        <div class="description">
          <p>Selecciona un episodio y un servidor. Disponibles: StreamTape y MEGA (Subtitulado).</p>
        </div>

        <div class="contenedor-video">
          <section class="player-selector" aria-label="Selector de idioma y servidor">
            <div class="language-toggle" role="tablist" aria-label="Idiomas disponibles">
              <button class="lang-btn" role="tab" aria-selected="false" data-language="lat" type="button" disabled>
                <img src="../../../ico/LAT.png" alt="Latino">
                <span>Latino</span>
              </button>
              <button class="lang-btn active" role="tab" aria-selected="true" data-language="sub" type="button">
                <img src="../../../ico/SUB.png" alt="Subtitulado">
                <span>Subtitulado</span>
              </button>
            </div>

            <div class="server-grid" aria-label="Servidores disponibles">
              <a href="#" class="server-card" data-server="st" aria-label="StreamTape">
                <img src="../../../ico/streamtape.png" alt="StreamTape">
                <span>StreamTape</span>
              </a>
              <a href="#" class="server-card" data-server="mg" aria-label="MEGA">
                <img src="../../../ico/mega.png" alt="MEGA">
                <span>MEGA</span>
              </a>
            </div>

            <div class="player-frame-wrap">
              <iframe id="player-frame" title="Reproductor" src="about:blank" allow="autoplay" allowfullscreen loading="lazy"></iframe>
            </div>
          </section>
        </div>

        <section class="navigation-buttons" aria-label="NavegaciÃ³n de episodios" style="display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; column-gap:10px; margin:12px 0;">
          <button id="prev-ep" class="nav-btn" disabled style="padding:10px 16px; border-radius:8px; background:#2c2c2c; color:#bbb; border:none; justify-self:start;">â—„ episodio anterior</button>
          <button id="toggle-episodes" class="nav-btn" aria-expanded="false" style="padding:10px 16px; border-radius:8px; background:#6c63ff; color:#fff; border:none; justify-self:center;">lista de episodios</button>
          <button id="next-ep" class="nav-btn" disabled style="padding:10px 16px; border-radius:8px; background:#2c2c2c; color:#bbb; border:none; justify-self:end;">siguiente episodio â–º</button>
        </section>

        <div class="episodes-container" id="episodes-container" hidden>
          <h3 style="text-align:center; margin-bottom: 1.5rem; font-size: 1.8rem;">Episodios</h3>
          <div class="episodes-grid" id="episodes-grid"></div>
        </div>

        <section aria-label="Enlaces de descarga" style="margin-top:18px;">
          <div style="font-weight:700; margin-bottom:8px;">Descargas</div>
          <a href="./descargar-season1.html" style="background:#27ae60; color:#fff; padding:10px 14px; border-radius:8px; display:inline-block;">Descargar Temporada 1</a>
        </section>
      </div>

      <div class="right-content">
        <h3>Popular</h3>
        <div class="popular-item" onclick="window.location.href='../../../public/anime/attack-on-titan/season1.html'">
          <img src="../../../img/attack-on-titan-s1.jpg" alt="Attack on Titan">
          <div class="title">Attack on Titan - Temporada 1</div>
        </div>
        <div class="popular-item" onclick="window.location.href='../../../public/anime/demon-slayer/demon-slayer.html'">
          <img src="../../../img/Kimetsu No Yaiba temporada 1.png" alt="Kimetsu No Yaiba">
          <div class="title">Kimetsu No Yaiba - Temporada 1</div>
        </div>
        <div class="popular-item" onclick="window.location.href='../../../public/anime/spy-x-family/spy-x-family.html'">
          <img src="../../../img/Spy x Family S1.jpg" alt="Spy x Family">
          <div class="title">Spy x Family - Temporada 1</div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>StudioOtaku</h3>
          <p>Tu plataforma favorita para ver anime en espaÃ±ol latino</p>
        </div>
        <div class="footer-section">
          <h3>Enlaces</h3>
          <ul>
            <li><a href="../../index.html#inicio">Inicio</a></li>
            <li><a href="../../html/catalogo.html">ðŸ—‚ï¸ CatÃ¡logo</a></li>
            <li><a href="#generos">GÃ©neros</a></li>
            <li><a href="https://exe.io/ANIMETV" target="_blank">AplicaciÃ³n APK</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>SÃ­guenos</h3>
          <div class="social-links" aria-label="Redes sociales y canales oficiales">
            <a class="social-item" href="https://exe.io/ANIMETV" target="_blank" rel="noopener" aria-label="APP Anime TV">
              <img src="../../../ico/logo.png" alt="APP Anime TV" />
              <span>APP Anime TV</span>
            </a>
            <a class="social-item" href="https://t.me/Mundoootakulatino" target="_blank" rel="noopener" aria-label="Canal de Telegram">
              <img src="../../../ico/telegram.webp" alt="Telegram" />
              <span>Canal Telegram</span>
            </a>
            <a class="social-item" href="https://t.me/qquiCA9FiB41MDkx" target="_blank" rel="noopener" aria-label="Grupo de Telegram">
              <img src="../../../ico/telegram.webp" alt="Telegram Grupo" />
              <span>Grupo Telegram</span>
            </a>
            <a class="social-item" href="https://rumble.com/c/c-6184817?e9s=src_v1_clr" target="_blank" rel="noopener" aria-label="PÃ¡gina de Rumble">
              <img src="../../../ico/RUMBLE.webp" alt="Rumble" />
              <span>PÃ¡gina en Rumble</span>
            </a>
            <a class="social-item" href="https://www.facebook.com/STUDIOOTAKU01" target="_blank" rel="noopener" aria-label="Facebook Studio">
              <img src="../../../ico/facebook.png" alt="Facebook" />
              <span>Facebook</span>
            </a>
            <a class="social-item" href="https://www.facebook.com/groups/723496132540351" target="_blank" rel="noopener" aria-label="Grupo de Anime en Facebook">
              <img src="../../../ico/facebook.png" alt="Facebook Grupo Anime" />
              <span>Grupo Anime</span>
            </a>
            <a class="social-item" href="https://www.facebook.com/groups/1071796301003086" target="_blank" rel="noopener" aria-label="Grupo de Free Fire en Facebook">
              <img src="../../../ico/facebook.png" alt="Facebook Grupo Free Fire" />
              <span>Grupo Free Fire</span>
            </a>
            <a class="social-item" href="https://www.tiktok.com/@studiootaku01" target="_blank" rel="noopener" aria-label="TikTok">
              <img src="../../../ico/TIKTOK.webp" alt="TikTok" />
              <span>TikTok</span>
            </a>
            <a class="social-item" href="https://www.instagram.com/studiootaku01" target="_blank" rel="noopener" aria-label="Instagram">
              <img src="../../../ico/INSTAGRAM.webp" alt="Instagram" />
              <span>Instagram</span>
            </a>
            <a class="social-item" href="https://github.com/studioanime977" target="_blank" rel="noopener" aria-label="GitHub">
              <img src="../../../ico/GUITHUP.webp" alt="GitHub" />
              <span>GitHub</span>
            </a>
            <a class="social-item" href="https://www.youtube.com/@STUDIOOTAKU1" target="_blank" rel="noopener" aria-label="YouTube">
              <img src="../../../ico/youtube.png" alt="YouTube" />
              <span>YouTube</span>
            </a>
            <a class="social-item" href="https://chat.whatsapp.com/LgQP3YXx2eS2XRav5ashRm" target="_blank" rel="noopener" aria-label="WhatsApp">
              <img src="../../../ico/whatsapp.webp" alt="WhatsApp" />
              <span>WhatsApp</span>
            </a>
          </div>
        </div>
      </div>
      <p class="footer-text">&copy; 2025 StudioOtaku. Todos los derechos reservados.</p>
    </div>
  </footer>

  <script>
    let currentEpisode = null;
    let currentServer = 'st';
    let currentLanguage = 'sub';

    const episodes = [
      { num: 1,  title: 'Episodio 1',  st: 'https://streamtape.com/e/kom7Y4aBLjiOv9L/Danmachi_-_Temporada_1_Episodio_01.mp4', mg: 'https://mega.nz/embed/LYEyGBxa#D8T3QqB_oLgCLCFREjhNh-BODRMnM8ww4LNkdGIrFQ0' },
      { num: 2,  title: 'Episodio 2',  st: 'https://streamtape.com/e/bw2wpjKAQvCKJv/Danmachi_-_Temporada_1_Episodio_02.mp4', mg: 'https://mega.nz/embed/PUd2zLDL#sv7uYSZWiSoCumqpi2dkJ0ztHT17JF7wv0k9hkH7Juw' },
      { num: 3,  title: 'Episodio 3',  st: 'https://streamtape.com/e/rDoz89PgRrsbDld/Danmachi_-_Temporada_1_Episodio_03.mp4', mg: 'https://mega.nz/embed/SNEW0JaK#-Q3O1lyCq9-l_oQMdV4P7Z88g1FtEMUI3g263lD6Sns' },
      { num: 4,  title: 'Episodio 4',  st: 'https://streamtape.com/e/4W4pmaD2xesKlqV/Danmachi_-_Temporada_1_Episodio_04.mp4', mg: 'https://mega.nz/embed/GBlUjYxA#S4IlzjHe0lVzWrPrK98zY4bfjkTqhgMnSXNwxkCMZ68' },
      { num: 5,  title: 'Episodio 5',  st: 'https://streamtape.com/e/mqOdlGlJzVib9Mm/Danmachi_-_Temporada_1_Episodio_05.mp4', mg: 'https://mega.nz/embed/Sd9C0bqS#0vzYXBZXx4vTypEaamGG5foXvRtZD2UrZmFje3CbKks' },
      { num: 6,  title: 'Episodio 6',  st: 'https://streamtape.com/e/P3P7PG1A3Mt0qDQ/Danmachi_-_Temporada_1_Episodio_06.mp4', mg: 'https://mega.nz/embed/TIV1yZhI#b92sBldWw04pGfUzH1DhMKqiPl0A24-KOmfs8CAc4qU' },
      { num: 7,  title: 'Episodio 7',  st: 'https://streamtape.com/e/kgZD3pxGVaUrBA/Danmachi_-_Temporada_1_Episodio_07.mp4', mg: 'https://mega.nz/embed/bRN3Ubza#Hp_bgxCGet1IHyQl_KoXSejpW6TUp3r54KoYDdIsLIU' },
      { num: 8,  title: 'Episodio 8',  st: 'https://streamtape.com/e/yb6eMKALaOI1pmM/Danmachi_-_Temporada_1_Episodio_08.mp4', mg: 'https://mega.nz/embed/OdEn0RLD#iHYhVUPfh06beIFnh1EvnyXWovNuVzdJQlvNV9H9v-Q' },
      { num: 9,  title: 'Episodio 9',  st: 'https://streamtape.com/e/z1JapoZ4YRUYqYq/Danmachi_-_Temporada_1_Episodio_09.mp4', mg: 'https://mega.nz/embed/mJN0wIbL#1BDTWRwsJL2OU9_38aYnfE1q4STy2drzH3-S1XNo0_8' },
      { num: 10, title: 'Episodio 10', st: 'https://streamtape.com/e/bq0DPKMW1kSPwvL/Danmachi_-_Temporada_1_Episodio_10.mp4', mg: 'https://mega.nz/embed/GAlyiQrY#uzR8px1ZDD2c7OWbF1HfZ3dW0kb1CrNW7dQwFJ-tY1c' },
      { num: 11, title: 'Episodio 11', st: 'https://streamtape.com/e/xmmmeZ7jjPiq9Z/Danmachi_-_Temporada_1_Episodio_11.mp4', mg: 'https://mega.nz/embed/mMUQ0ALI#7HCV3yo3mvnkcDr2zAYs3eBgjocg7_PS0zLfoALCmV8' },
      { num: 12, title: 'Episodio 12', st: 'https://streamtape.com/e/MqxJZOVJDyUmO4a/Danmachi_-_Temporada_1_Episodio_12.mp4', mg: 'https://mega.nz/embed/zcNGyYDb#wflfx5gSfeyHVV-sRgKRiLeKjA7pAlG8QBF_aa6LwjQ' },
      { num: 13, title: 'Episodio 13', st: 'https://streamtape.com/e/ox36x0dL0YIJ22z/Danmachi_-_Temporada_1_Episodio_13.mp4', mg: 'https://mega.nz/embed/KFdF3b7S#SJhVFBy3BJ5YquaVIqHP6kMQPXjFOQJ3tf7rhzJgApw' }
    ];

    const hasHttp = (u) => u && /^https?:\/\//i.test(u);

    function setActiveLanguage(lang) {
      currentLanguage = lang;
      document.querySelectorAll('.lang-btn').forEach(btn => {
        const isActive = btn.dataset.language === lang;
        btn.classList.toggle('active', isActive);
        btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
      });
      playCurrent();
    }

    function setActiveServer(server) {
      currentServer = server;
      document.querySelectorAll('.server-card').forEach(card => {
        card.classList.toggle('active', card.dataset.server === server);
      });
      playCurrent();
    }

    function playCurrent() {
      if (!currentEpisode) return;
      const frame = document.getElementById('player-frame');
      if (!frame) return;

      let url = currentServer === 'mg' ? currentEpisode.mg : currentEpisode.st;

      if (!hasHttp(url)) {
        url = currentServer === 'mg' ? currentEpisode.st : currentEpisode.mg;
        currentServer = currentServer === 'mg' ? 'st' : 'mg';
        document.querySelectorAll('.server-card').forEach(card => {
          card.classList.toggle('active', card.dataset.server === currentServer);
        });
      }
      frame.src = hasHttp(url) ? url : 'about:blank';
    }

    function loadEpisode(ep) {
      currentEpisode = ep;
      document.querySelectorAll('.episode-btn').forEach((btn, i) => {
        btn.classList.toggle('active', i + 1 === ep.num);
      });
      const title = document.getElementById('current-episode-title');
      if (title) title.textContent = `Episodio ${ep.num}`;
      playCurrent();
      updateNavState();
    }

    function updateNavState() {
      const prev = document.getElementById('prev-ep');
      const next = document.getElementById('next-ep');
      if (!prev || !next || !currentEpisode) return;
      prev.disabled = currentEpisode.num <= 1;
      next.disabled = currentEpisode.num >= episodes.length;
      prev.style.background = prev.disabled ? '#2c2c2c' : '#6c63ff';
      prev.style.color = prev.disabled ? '#bbb' : '#fff';
      next.style.background = next.disabled ? '#2c2c2c' : '#6c63ff';
      next.style.color = next.disabled ? '#bbb' : '#fff';
    }

    const episodesGrid = document.getElementById('episodes-grid');
    if (episodesGrid) {
      episodes.forEach(ep => {
        const btn = document.createElement('button');
        btn.className = 'episode-btn';
        btn.textContent = `Ep ${ep.num}`;
        btn.addEventListener('click', () => loadEpisode(ep));
        episodesGrid.appendChild(btn);
      });
    }

    document.querySelectorAll('.server-card').forEach(card => {
      card.addEventListener('click', (e) => {
        e.preventDefault();
        setActiveServer(card.dataset.server);
      });
    });

    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        if (btn.disabled) return;
        setActiveLanguage(btn.dataset.language);
      });
    });

    const prevBtn = document.getElementById('prev-ep');
    const nextBtn = document.getElementById('next-ep');
    if (prevBtn) prevBtn.addEventListener('click', () => { if (currentEpisode && currentEpisode.num > 1) loadEpisode(episodes[currentEpisode.num - 2]); });
    if (nextBtn) nextBtn.addEventListener('click', () => { if (currentEpisode && currentEpisode.num < episodes.length) loadEpisode(episodes[currentEpisode.num]); });

    const toggleBtn = document.getElementById('toggle-episodes');
    const episodesBox = document.getElementById('episodes-container');
    if (toggleBtn && episodesBox) {
      toggleBtn.addEventListener('click', () => {
        const isHidden = episodesBox.hasAttribute('hidden');
        if (isHidden) {
          episodesBox.removeAttribute('hidden');
          toggleBtn.setAttribute('aria-expanded', 'true');
          episodesBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
          episodesBox.setAttribute('hidden', '');
          toggleBtn.setAttribute('aria-expanded', 'false');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    }

    (function(){
      const p = new URLSearchParams(window.location.search);
      const ep = parseInt(p.get('ep'));
      if (Number.isFinite(ep) && ep >= 1 && ep <= episodes.length) {
        currentServer = 'st';
        setActiveLanguage('sub');
        loadEpisode(episodes[ep - 1]);
        return;
      }
      setActiveServer('st');
      setActiveLanguage('sub');
      loadEpisode(episodes[0]);
    })();
  </script>

  <script src="../../../assets/js/ads.js"></script>
</body>
</html>
