<!DOCTYPE html>
<html lang="es">
<head>
    <meta name="f08cd2b5211f5b0a95753720000f639c66350c1d" content="f08cd2b5211f5b0a95753720000f639c66350c1d" />

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-adsense-account" content="ca-pub-8480825005176665">
  <title>Demon Slayer - Temporada 2 - StudioOtaku</title>
  <link rel="stylesheet" href="../../../css/server-selector.css">
  
  <link rel="stylesheet" href="../../../css/temporadas.css">
  <link rel="stylesheet" href="../../../css/style.css">
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8480825005176665" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../../../css/anime.css">
  <link rel="stylesheet" href="../../../css/responsive-style.css">
  <link rel="stylesheet" href="../../../css/responsive-navigation.css"><style>
    /* Layout de escritorio: reproductor a la izquierda y Popular a la derecha */
    .main-content { display: flex; gap: 20px; align-items: flex-start; }
    .left-content { flex: 3; }
    .right-content { flex: 1; }

    /* Miniaturas en la secci√≥n Popular (desktop) */
    .right-content .popular-item { display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.03); margin-bottom: 10px; cursor: pointer; }
    .right-content .popular-item:hover { background: rgba(255,255,255,0.06); }
    .right-content .popular-item img { width: 120px; height: 72px; object-fit: cover; border-radius: 6px; display: block; }
    .right-content .popular-item .title { font-size: 0.95rem; line-height: 1.3; color: #fff; }

    /* Controles del reproductor */
    .video-functions { display: flex; gap: 10px; justify-content: flex-start; margin-top: 10px; }
    .function-btn { padding: 10px 16px; background: linear-gradient(135deg, #6c63ff 0%, #5a54e6 100%); color: #fff; border: none; border-radius: 8px; font-weight: 600; box-shadow: 0 4px 10px rgba(0,0,0,0.15); cursor: pointer; transition: transform 120ms ease, box-shadow 120ms ease, background-color 120ms ease; }
    .function-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,0.2); }
    .function-btn:active { transform: translateY(0); box-shadow: 0 3px 8px rgba(0,0,0,0.15); }

    /* Efecto Expandir */
    .contenedor-video.expanded .reproductor-video iframe { height: 75vh; }

    /* Efecto Apagar Luces */
    body.lights-off::before { content: ""; position: fixed; inset: 0; background: rgba(0,0,0,0.85); pointer-events: none; z-index: 999; }
    .reproductor-video { position: relative; z-index: 1000; }
    body.lights-off .function-btn { background: #333; color: #ffd54f; }

    /* Opcional: asegurar que el iframe del reproductor se vea bien */
    .reproductor-video iframe { width: 100%; height: 480px; border: none; }
    /* Bot√≥n Descargar alineado a la derecha */
    .video-functions { align-items: center; }
    .download-btn { margin-left: auto; background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%); }
    .function-btn.disabled { opacity: 0.5; pointer-events: none; }
  </style>
  <!-- Estilos de footer unificado -->
  <style>
    .footer { margin-top: 28px; padding: 16px 0; background: rgba(255,255,255,0.04); border-top: 1px solid rgba(255,255,255,0.08); }
    .footer .footer-content { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .footer .footer-section h3 { margin: 0 0 8px; }
    .footer .footer-section p { margin: 0; opacity: 0.85; }
    .footer .footer-section ul { list-style: none; padding: 0; margin: 0; }
    .footer .footer-section ul li { margin: 6px 0; }
    .footer .footer-section a { color: #fff; text-decoration: none; }
    .footer .footer-section a:hover { text-decoration: underline; }
    .footer .social-links { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
    @media (min-width:768px){ .footer .social-links { grid-template-columns: repeat(4, 1fr); } }
    .footer .social-item { display: flex; align-items: center; gap: 8px; background: #111; border-radius: 10px; padding: 10px; text-decoration: none; color: #fff; }
    .footer .social-item:hover { background: #1a1a1a; }
    .footer .social-item img { width: 22px; height: 22px; border-radius: 4px; object-fit: cover; }
    .footer .social-item span { line-height: 1; }
    .footer .footer-text { text-align: center; margin-top: 12px; opacity: 0.8; }
    @media (max-width:768px){ .footer .footer-content { grid-template-columns: 1fr; } }
  </style>
  <!-- Estilos del modal de suscripci√≥n -->
  <style>
    .subscribe-modal[hidden] { display: none; }
    .subscribe-modal { position: fixed; inset: 0; z-index: 9999; display: grid; place-items: center; background: rgba(10,12,16,0.75); backdrop-filter: blur(4px); }
    .subscribe-modal::before { content: ""; position: absolute; inset: 0; background: url('../../../ico/suscribete.png') center/220px no-repeat; opacity: 0.25; filter: drop-shadow(0 6px 18px rgba(0,0,0,0.4)); }
    .subscribe-card { position: relative; width: min(720px, 92vw); border-radius: 16px; padding: 22px 22px 18px; background: linear-gradient(180deg, rgba(21,25,35,0.95), rgba(21,25,35,0.98)); border: 1px solid #2a3142; box-shadow: 0 10px 28px rgba(0,0,0,0.45); text-align: center; color: #fff; }
    .subscribe-card .brand { display: inline-flex; align-items: center; gap: 10px; margin-bottom: 8px; font-weight: 800; letter-spacing: 0.2px; }
    .subscribe-card .brand img { width: 32px; height: 32px; }
    .subscribe-title { font-size: 1.6rem; margin: 6px 0 8px; }
    .subscribe-desc { color: #b8bcc8; margin: 0 0 14px; }
    .subscribe-actions { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    .btn { display: inline-flex; align-items: center; gap: 10px; padding: 10px 16px; border-radius: 12px; text-decoration: none; border: 1px solid #334050; transition: all .18s ease; font-weight: 700; }
    .btn img { width: 20px; height: 20px; }
    .btn-primary { background: #ea4335; color: #fff; border-color: #ea4335; }
    .btn-primary:hover { filter: brightness(1.08); transform: translateY(-1px); }
    .btn-ghost { background: #1a2131; color: #e8e8ea; }
    .btn-ghost:hover { border-color: #3b4a63; transform: translateY(-1px); }
    .btn-facebook { background: #1877F2; color: #fff; border-color: #1877F2; }
    .btn-facebook:hover { filter: brightness(1.08); transform: translateY(-1px); }
    .btn-tiktok { background: linear-gradient(90deg, #25F4EE, #FE2C55); color: #fff; border-color: transparent; }
    .btn-tiktok:hover { filter: brightness(1.08); transform: translateY(-1px); }
    .subscribe-foot { margin-top: 10px; font-size: .9rem; color: #9aa1af; }
    @media (max-width: 768px) { .subscribe-title { font-size: 1.35rem; } }
  </style>
    <link rel="icon" type="image/png" href="../../../ico/logo.png">
    <link rel="apple-touch-icon" href="../../../ico/logo.png">
    <link rel="shortcut icon" href="../../../ico/logo.png">
  <style>
    .header + main.container { padding-top: 6rem; }
  </style>
</head>
<body>

  <header class="header">
    <nav class="nav-container">
      <div class="logo"><img src="../../../ico/logo.png" alt="Mundo Otaku Latino" style="height:28px; vertical-align:middle; margin-right:8px;">Mundo Otaku Latino</div>
      <ul class="nav-menu">
        <li><a href="../../index.html#inicio">Inicio</a></li>
        <li><a href="../../html/catalogo.html">Anime</a></li>
        <li><a href="#peliculas">Pel√≠culas</a></li>
        <li><a href="#generos">G√©neros</a></li>
        <li><a href="https://exe.io/ANIMETV" target="_blank">APK</a></li>
      </ul>
    </nav>
  </header>

  <!-- Modal Suscr√≠bete -->
  <div id="subscribe-modal" class="subscribe-modal" role="dialog" aria-modal="true" aria-labelledby="subscribe-title" hidden>
    <div class="subscribe-card">
      <div class="brand"><img src="../../../ico/youtube.png" alt="YouTube">Mundo Otaku Latino</div>
      <h2 id="subscribe-title" class="subscribe-title">¬°Ap√≥yanos suscribi√©ndote al canal!</h2>
      <p class="subscribe-desc">Tu apoyo nos ayuda a mantener el sitio y subir nuevo contenido. ¬°Gracias por estar aqu√≠!</p>
      <div class="subscribe-actions">
        <a class="btn btn-primary" href="https://www.youtube.com/@STUDIOOTAKU1" target="_blank" rel="noopener" aria-label="Abrir canal en YouTube"><img src="../../../ico/youtube.png" alt="YouTube"> Suscribirme en YouTube</a>
        <a class="btn btn-facebook" href="https://www.facebook.com/STUDIOOTAKU01" target="_blank" rel="noopener" aria-label="Abrir Facebook"><img src="../../../ico/facebook.png" alt="Facebook"> Facebook</a>
        <a class="btn btn-tiktok" href="https://www.tiktok.com/@studiootaku01" target="_blank" rel="noopener" aria-label="Abrir TikTok"><img src="../../../ico/TIKTOK.webp" alt="TikTok"> TikTok</a>
        <button id="subscribe-dismiss" class="btn btn-ghost" aria-label="Cerrar y continuar">Continuar al sitio</button>
      </div>
      <div class="subscribe-foot">Se mostrar√° una vez por sesi√≥n.</div>
    </div>
  </div>

  <main class="main-content">
    <a href="../../html/catalogo.html" class="back-btn">Volver al Catalogo</a>
    <div class="left-content">
      
      <div class="title-container">
        <h1 class="season-title">Demon Slayer - Temporada 2</h1>
        <h2 class="episode-title" id="current-episode-title">Episodio 1</h2>
      </div>

      <div class="description">
        <p>Disfruta de Demon Slayer Temporada 2 completa (11 episodios). Selecciona un episodio y elige el reproductor. La opci√≥n 1 contiene los enlaces de mxdrop.</p>
      </div>

      <div class="contenedor-video">
        <section class="player-selector" aria-label="Selector de idioma y servidor">
          <div class="language-toggle" role="tablist" aria-label="Idiomas disponibles">
            <button class="lang-btn" role="tab" aria-selected="false" data-language="lat">
              <img src="../../../ico/LAT.png" alt="Latino">
              <span>Latino</span>
            </button>
            <button class="lang-btn" role="tab" aria-selected="false" data-language="sub">
              <img src="../../../ico/SUB.png" alt="Subtitulado">
              <span>Subtitulado</span>
            </button>
          </div>

          <div class="server-grid" aria-label="Servidores disponibles">
            <a href="#" class="server-card" data-server="Filemoon" data-url-lat="#" data-url-sub="#" aria-label="Filemoon">
              <img src="../../../ico/FILEMOON.png" alt="Filemoon">
              <span>Filemoon</span>
            </a>
            <a href="#" class="server-card" data-server="StreamWish" data-url-lat="#" data-url-sub="#" aria-label="StreamWish">
              <img src="../../../ico/STREAMWISH.png" alt="StreamWish">
              <span>StreamWish</span>
            </a>
            <a href="#" class="server-card" data-server="MixDrop" data-url-lat="#" data-url-sub="#" aria-label="MixDrop">
              <img src="../../../ico/mixdrop.webp" alt="MixDrop">
              <span>MixDrop</span>
            </a>
            <a href="#" class="server-card" data-server="StreamTape" data-url-lat="#" data-url-sub="#" aria-label="StreamTape">
              <img src="../../../ico/streamtape.png" alt="StreamTape">
              <span>StreamTape</span>
            </a>
            <a href="#" class="server-card" data-server="Netu" data-url-lat="#" data-url-sub="#" aria-label="Netu">
              <img src="../../../ico/netu.png" alt="Netu">
              <span>Netu</span>
            </a>
            <a href="#" class="server-card" data-server="Uqload" data-url-lat="#" data-url-sub="#" aria-label="Uqload">
              <img src="../../../ico/UQLOAD.webp" alt="Uqload">
              <span>Uqload</span>
            </a>
            <a href="#" class="server-card" data-server="HGLINK" data-url-lat="#" data-url-sub="#" aria-label="HGLINK">
              <img src="../../../ico/HGLINK.png" alt="HGLINK">
              <span>HGLINK</span>
            </a>
            <a href="#" class="server-card" data-server="EarnVids" data-url-lat="#" data-url-sub="#" aria-label="EarnVids">
              <img src="../../../ico/earnvids.jpg" alt="EarnVids">
              <span>EarnVids</span>
            </a>
            <a href="#" class="server-card" data-server="LULU VDO" data-url-lat="#" data-url-sub="#" aria-label="LULU VDO">
              <img src="../../../ico/LULUVDO.webp" alt="LULU VDO">
              <span>LULU VDO</span>
            </a>
            <a href="#" class="server-card" data-server="HexUpload" data-url-lat="#" data-url-sub="#" aria-label="HexUpload">
              <img src="../../../ico/HEXUPLOAD.png" alt="HexUpload">
              <span>HexUpload</span>
            </a>
          </div>

          <div class="player-frame-wrap">
            <iframe id="player-frame" title="Reproductor" src="about:blank" allow="autoplay" allowfullscreen loading="lazy"></iframe>
          </div>
        </section>
        <!-- Controles de Expandir/Apagar/Descargar eliminados -->
      </div>

      <div class="description">
        <p>11/11 episodios disponibles con enlaces de mxdrop. Estado: Temporada completa.</p>
      </div>

      <section class="navigation-buttons" aria-label="Navegaci√≥n de episodios" style="display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; column-gap:10px; margin:12px 0;">
        <button id="prev-ep" class="nav-btn" disabled style="padding:10px 16px; border-radius:8px; background:#2c2c2c; color:#bbb; border:none; justify-self:start;">‚óÑ episodio anterior</button>
        <button id="toggle-episodes" class="nav-btn" aria-expanded="false" style="padding:10px 16px; border-radius:8px; background:#6c63ff; color:#fff; border:none; justify-self:center;">lista de episodios</button>
        <button id="next-ep" class="nav-btn" disabled style="padding:10px 16px; border-radius:8px; background:#2c2c2c; color:#bbb; border:none; justify-self:end;">siguiente episodio ‚ñ∫</button>
      </section>

      <div class="episodes-container" id="episodes-container" hidden>
        <h3 style="text-align:center; margin-bottom: 1.5rem; font-size: 1.8rem;">Episodios</h3>
        <div class="episodes-grid" id="episodes-grid">
          <!-- Los episodios se generar√°n con JavaScript -->
        </div>
      </div>
      <section class="download-servers-section" aria-label="Enlaces de descarga" style="margin-top:18px;">
        <div class="servers-title" style="font-weight:700; margin-bottom:8px;">Descargas</div>
        <a href="./descargar-temporada2.html" class="download-link" style="background:#27ae60; color:#fff; padding:10px 14px; border-radius:8px; display:inline-block;">Descargar Temporada 2</a>
      </section>
    </div>

    <div class="right-content">
      <h3>Popular</h3>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/spy-x-family/spy-x-family.html'">
        <img src="../../../img/Spy x Family S1.jpg" alt="Spy x Family">
        <div class="title">Spy x Family - Temporada 1</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/chainsaw-man/chainsaw-man.html'">
        <img src="../../../img/Chainsaw Man S1.jpg" alt="Chainsaw Man">
        <div class="title">Chainsaw Man - Temporada 1</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/attack-on-titan/attack-on-titan.html'">
        <img src="../../../img/Attack on Titan S4.jpg" alt="Attack on Titan">
        <div class="title">Attack on Titan - Temporada 4</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/jujutsu-kaisen/jujutsu-kaisen.html'">
        <img src="../../../img/Jujutsu Kaisen S1.jpg" alt="Jujutsu Kaisen">
        <div class="title">Jujutsu Kaisen - Temporada 1</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/demon-slayer/demon-slayer.html'">
        <img src="../../../img/Kimetsu No Yaiba temporada 1.png" alt="Kimetsu No Yaiba">
        <div class="title">Kimetsu No Yaiba - Temporada 1</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/naruto/naruto.html'">
        <img src="../../../img/Naruto Classic.jpg" alt="Naruto">
        <div class="title">Naruto - Cl√°sico</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/one-piece/one-piece.html'">
        <img src="../../../img/One Piece Wano.jpg" alt="One Piece">
        <div class="title">One Piece - Wano</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/dragon-ball/dragon-ball.html'">
        <img src="../../../img/Dragon Ball Z.jpg" alt="Dragon Ball Z">
        <div class="title">Dragon Ball Z</div>
      </div>
      <div class="popular-item" onclick="window.location.href='../../../public/anime/bleach/bleach.html'">
        <img src="../../../img/Bleach TYBW.jpg" alt="Bleach">
        <div class="title">Bleach - TYBW</div>
      </div>
    
      <!-- Bloque social sustituido por footer unificado -->
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>StudioOtaku</h3>
          <p>Tu plataforma favorita para ver anime en espa√±ol latino</p>
        </div>
        <div class="footer-section">
          <h3>Enlaces</h3>
          <ul>
            <li><a href="../../index.html#inicio">Inicio</a></li>
            <li><a href="../../html/catalogo.html">üóÇÔ∏è Catalogo</a></li>
            <li><a href="#generos">G√©neros</a></li>
            <li><a href="https://exe.io/ANIMETV" target="_blank">Aplicaci√≥n APK</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>S√≠guenos</h3>
          <div class="social-links" aria-label="Redes sociales y canales oficiales">
            <a class="social-item" href="https://exe.io/ANIMETV" target="_blank" rel="noopener" aria-label="APP Anime TV">
              <img src="../../../ico/logo.png" alt="APP Anime TV" />
              <span>APP Anime TV</span>
            </a>
            <a class="social-item" href="https://t.me/Mundoootakulatino" target="_blank" rel="noopener" aria-label="Canal de Telegram">
              <img src="../../../ico/telegram.webp" alt="Telegram" />
              <span>Canal Telegram</span>
            </a>
            <a class="social-item" href="https://t.me/qquiCA9FiB41MDkx" target="_blank" rel="noopener" aria-label="Grupo de Telegram">
              <img src="../../../ico/telegram.webp" alt="Telegram Grupo" />
              <span>Grupo Telegram</span>
            </a>
            <a class="social-item" href="https://rumble.com/c/c-6184817?e9s=src_v1_clr" target="_blank" rel="noopener" aria-label="P√°gina de Rumble">
              <img src="../../../ico/RUMBLE.webp" alt="Rumble" />
              <span>P√°gina en Rumble</span>
            </a>
            <a class="social-item" href="https://www.facebook.com/STUDIOOTAKU01" target="_blank" rel="noopener" aria-label="Facebook Studio">
              <img src="../../../ico/facebook.png" alt="Facebook" />
              <span>Facebook</span>
            </a>
            <a class="social-item" href="https://www.facebook.com/groups/723496132540351" target="_blank" rel="noopener" aria-label="Grupo de Anime en Facebook">
              <img src="../../../ico/facebook.png" alt="Facebook Grupo Anime" />
              <span>Grupo Anime</span>
            </a>
            <a class="social-item" href="https://www.facebook.com/groups/1071796301003086" target="_blank" rel="noopener" aria-label="Grupo de Free Fire en Facebook">
              <img src="../../../ico/facebook.png" alt="Facebook Grupo Free Fire" />
              <span>Grupo Free Fire</span>
            </a>
            <a class="social-item" href="https://www.tiktok.com/@studiootaku01" target="_blank" rel="noopener" aria-label="TikTok">
              <img src="../../../ico/TIKTOK.webp" alt="TikTok" />
              <span>TikTok</span>
            </a>
            <a class="social-item" href="https://www.instagram.com/studiootaku01" target="_blank" rel="noopener" aria-label="Instagram">
              <img src="../../../ico/INSTAGRAM.webp" alt="Instagram" />
              <span>Instagram</span>
            </a>
            <a class="social-item" href="https://github.com/studioanime977" target="_blank" rel="noopener" aria-label="GitHub">
              <img src="../../../ico/GUITHUP.webp" alt="GitHub" />
              <span>GitHub</span>
            </a>
            <a class="social-item" href="https://www.youtube.com/@STUDIOOTAKU1" target="_blank" rel="noopener" aria-label="YouTube">
              <img src="../../../ico/youtube.png" alt="YouTube" />
              <span>YouTube</span>
            </a>
            <a class="social-item" href="https://chat.whatsapp.com/LgQP3YXx2eS2XRav5ashRm" target="_blank" rel="noopener" aria-label="WhatsApp">
              <img src="../../../ico/whatsapp.webp" alt="WhatsApp" />
              <span>WhatsApp</span>
            </a>
          </div>
        </div>
      </div>
      <p class="footer-text">&copy; 2025 StudioOtaku. Todos los derechos reservados.</p>
    </div>
  </footer>
  <script src="../../../assets/js/server-selector.js"></script>

  <script>
    // Funci√≥n para expandir el reproductor
    function expandPlayer() {
      const videoContainer = document.querySelector('.contenedor-video');
      videoContainer.classList.toggle('expanded');
    }
  
    // Funci√≥n para apagar/encender las luces
    function toggleLights() {
      document.body.classList.toggle('lights-off');
    }

    // Convierte cualquier URL de StreamTape (/v/ o /e/) a URL embebible /e/{id}/
    function toEmbed(url) {
      if (!url) return '';
      try {
        const m = url.match(/\/\/(?:www\.)?streamtape\.com\/(?:v|e)\/([^\/?#]+)/i);
        if (m && m[1]) return `https://streamtape.com/e/${m[1]}/`;
      } catch (_) {}
      // Fallback: reemplazo simple
      return url.replace('/v/', '/e/') + (url.endsWith('/') ? '' : '/');
    }

    // Helpers para normalizar enlaces y definir fallback de MixDrop
    function normalizeUrl(url) {
      if (!url) return '';
      return url; // mxdrop ya est√° en formato /e/
    }
    function mixdropFallback(url) {
      if (!url) return '';
      const m = url.match(/https?:\/\/mxdrop\.to\/e\/([^\/?#]+)/i);
      return m ? `https://mdy48tn97.com/e/${m[1]}` : '';
    }

    // Estado actual
    let currentEpisode = null;

    // Estructura de 11 episodios de Demon Slayer Temporada 2 (Arco del Distrito Rojo)
    const episodes = [
      { num: 1, title: "Hashira de Sonido Tengen Uzui", op1: "https://mxdrop.to/e/z1jxdvw4bkxrp4", op2: "https://hqq.ac/e/aHR2c09XVHdVY2N3TXVrdVZrblQxUT09", op3: "", op4: "" },
      { num: 2, title: "Infiltr√°ndose en el Distrito Rojo", op1: "https://mxdrop.to/e/7kjw0nd6i7qx60", op2: "https://hqq.ac/e/TlY1VisyV2grcElUemd0aG5zMkp5UT09", op3: "", op4: "" },
      { num: 3, title: "¬øQu√© eres?", op1: "https://mxdrop.to/e/l79jwkj0bn3q1p", op2: "https://hqq.ac/e/R09qUWUzcnBCZGF6eElYUExKWkhqZz09", op3: "", op4: "" },
      { num: 4, title: "Esta noche", op1: "https://mxdrop.to/e/elz8epd9ue4ve3", op2: "https://hqq.ac/e/MjhOdVlCYWs5UjlZaHVmR2lKdXQ4Zz09", op3: "", op4: "" },
      { num: 5, title: "Las cosas est√°n a punto de ponerse llamativas", op1: "https://mxdrop.to/e/r60xdrx0sw7x0n", op2: "https://hqq.ac/e/L1hHa3hGbXBPM3ZEOXNIK2hWODFaQT09", op3: "", op4: "" },
      { num: 6, title: "Capas de miedo", op1: "https://mxdrop.to/e/l79jwmr3sqqd4qe", op2: "https://hqq.ac/e/K2REZWI0ZDZkUHZ3dC91TWU0LzhtZz09", op3: "", op4: "" },
      { num: 7, title: "Transformaci√≥n", op1: "https://mxdrop.to/e/03z6rezecrgo8e", op2: "https://hqq.ac/e/bXVPWWNzeHM3QnJVaDdjanljM3VsQT09", op3: "", op4: "" },
      { num: 8, title: "Reuni√≥n", op1: "https://mxdrop.to/e/q1d86kpzhn4en1", op2: "https://hqq.ac/e/OS90cFErMkVXdXoyVkxEVVcwWGpJQT09", op3: "", op4: "" },
      { num: 9, title: "Derrota de una Luna Superior", op1: "https://mxdrop.to/e/wlwjw9m1c81e6j", op2: "https://hqq.ac/e/MytTTExMYU1xTUxqT0NWZHR1Qkc0Zz09", op3: "", op4: "" },
      { num: 10, title: "Nunca rindas", op1: "https://mxdrop.to/e/7kjwjjrpu6m7ld", op2: "https://hqq.ac/e/bWdXeUlnSkRPLzhHK1NaUWN4bndjUT09", op3: "", op4: "" },
      { num: 11, title: "No importa cu√°ntas vidas", op1: "https://mxdrop.to/e/8ljrj1eqi64qe4p", op2: "https://hqq.ac/e/QW4yR0JZVWpSbHhsYThXbTVYODJhZz09", op3: "", op4: "" }
    ];

    // Generar botones de episodios
    const episodesGrid = document.getElementById('episodes-grid');
    episodes.forEach(episode => {
      const episodeBtn = document.createElement('button');
      episodeBtn.className = 'episode-btn';
      episodeBtn.textContent = `Ep ${episode.num}`;
      episodeBtn.onclick = () => loadEpisode(episode);
      episodesGrid.appendChild(episodeBtn);
    });

    // Aplica el episodio a la grilla de servidores (MixDrop como fuente principal en Latino)
    function applyEpisodeToServerGrid(ep) {
      const mixdropCard = document.querySelector('.server-card[data-server="MixDrop"]');
      const netuCard = document.querySelector('.server-card[data-server="Netu"]');
      const otherCards = document.querySelectorAll('.server-card:not([data-server="MixDrop"])');
      const latUrlMix = normalizeUrl(ep.op1 || '');
      const latUrlNetu = normalizeUrl(ep.op2 || '');
      if (mixdropCard) {
        mixdropCard.setAttribute('data-url-lat', latUrlMix || '#');
        const fb = mixdropFallback(latUrlMix);
        if (fb) {
          mixdropCard.setAttribute('data-fallback-lat', fb);
        } else {
          mixdropCard.removeAttribute('data-fallback-lat');
        }
        mixdropCard.setAttribute('data-url-sub', '#');
      }
      if (netuCard) {
        netuCard.setAttribute('data-url-lat', latUrlNetu || '#');
        netuCard.setAttribute('data-url-sub', '#');
      }
      otherCards.forEach(card => {
        if (!card.matches('[data-server="MixDrop"], [data-server="Netu"]')) {
          card.setAttribute('data-url-lat', '#');
          card.setAttribute('data-url-sub', '#');
        }
      });
    }

    // Cargar episodio usando el nuevo selector de servidores
    function loadEpisode(episode) {
      document.querySelectorAll('.episode-btn').forEach((btn, index) => {
        btn.classList.toggle('active', index + 1 === episode.num);
      });
      document.getElementById('current-episode-title').textContent = `Episodio ${episode.num}${episode.title ? ': ' + episode.title : ''}`;
      currentEpisode = episode;
      applyEpisodeToServerGrid(episode);
      // Si ya hay un idioma seleccionado, refrescar disponibilidad y cargar preferido
      try {
        const activeLangBtn = document.querySelector('.lang-btn[aria-selected="true"]');
        if (activeLangBtn) {
          activeLangBtn.click();
        } else {
          // Si no hay idioma activo, activar Latino por defecto para mostrar servidores disponibles
          const latBtn = document.querySelector('.lang-btn[data-language="lat"]');
          if (latBtn) latBtn.click();
        }
      } catch (_) {}
      updateNavState();
    }

    // Navegaci√≥n anterior/siguiente
    function updateNavState() {
      const prev = document.getElementById('prev-ep');
      const next = document.getElementById('next-ep');
      if (!prev || !next || !currentEpisode) return;
      prev.disabled = currentEpisode.num <= 1;
      next.disabled = currentEpisode.num >= episodes.length;
      prev.style.background = prev.disabled ? '#2c2c2c' : '#6c63ff';
      prev.style.color = prev.disabled ? '#bbb' : '#fff';
      next.style.background = next.disabled ? '#2c2c2c' : '#6c63ff';
      next.style.color = next.disabled ? '#bbb' : '#fff';
    }
    const prevBtn = document.getElementById('prev-ep');
    const nextBtn = document.getElementById('next-ep');
    if (prevBtn) {
      prevBtn.addEventListener('click', () => {
        if (!currentEpisode) return;
        const idx = currentEpisode.num - 2; // episodio anterior
        if (idx >= 0) loadEpisode(episodes[idx]);
      });
    }
    if (nextBtn) {
      nextBtn.addEventListener('click', () => {
        if (!currentEpisode) return;
        const idx = currentEpisode.num; // siguiente episodio
        if (idx < episodes.length) loadEpisode(episodes[idx]);
      });
    }

    // Cargar el primer episodio por defecto
    document.addEventListener('DOMContentLoaded', function () {
      if (!currentEpisode && episodes && episodes.length) {
        const firstMix = episodes.find(ep => normalizeUrl(ep.op1 || ''));
        currentEpisode = firstMix || episodes[0];
        applyEpisodeToServerGrid(currentEpisode);
        updateNavState();
      }
      const latBtn = document.querySelector('.lang-btn[data-language="lat"]');
      if (latBtn) {
        latBtn.click();
      }
    });

    // Mover botones de servidor al reproductor (si existen)
    const playerOptions = document.querySelector('.player-options');
    const videoContainer = document.querySelector('.contenedor-video');
    if (playerOptions && videoContainer && videoContainer.firstChild) {
      videoContainer.insertBefore(playerOptions, videoContainer.firstChild);
    }

    // Toggle de lista de episodios
    const toggleBtn = document.getElementById('toggle-episodes');
    const episodesContainer = document.getElementById('episodes-container');
    if (toggleBtn && episodesContainer) {
      toggleBtn.addEventListener('click', function () {
        const isHidden = episodesContainer.hasAttribute('hidden');
        if (isHidden) {
          episodesContainer.removeAttribute('hidden');
          toggleBtn.setAttribute('aria-expanded', 'true');
          try {
            episodesContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
          } catch (_) {}
        } else {
          episodesContainer.setAttribute('hidden', '');
          toggleBtn.setAttribute('aria-expanded', 'false');
        }
      });
    }

  </script>
<section class="anuncio-responsive">
  <!-- Anuncio Google responsivo -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8480825005176665"
       data-ad-slot="1234567890"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</section>
<script>
(function(mxtv){
var d = document,
    s = d.createElement('script'),
    l = d.scripts[d.scripts.length - 1];
s.settings = mxtv || {};
s.src = "\/\/aggressivestruggle.com\/bKX.V\/s\/dFG\/l\/0PYBWEcI\/-evmn9au\/ZoUZlDkcP\/TmY\/2\/NZz\/UM1BNQz\/EeteNxjRYt3wNZTMUE3jMEgo";
s.async = true;
s.referrerPolicy = 'no-referrer-when-downgrade';
l.parentNode.insertBefore(s, l);
})({})
</script>

<script>
  (function() {
    const modal = document.getElementById('subscribe-modal');
    const dismiss = document.getElementById('subscribe-dismiss');
    const KEY = 'subscribeModalShown';
    function openModal() {
      if (!modal) return;
      modal.hidden = false;
      document.body.style.overflow = 'hidden';
    }
    function closeModal() {
      modal.hidden = true;
      document.body.style.overflow = '';
      try { sessionStorage.setItem(KEY, '1'); } catch (_) {}
    }
    document.addEventListener('DOMContentLoaded', function() {
      let shown = '0';
      try { shown = sessionStorage.getItem(KEY) || '0'; } catch (_) {}
      if (shown !== '1') openModal();
    });
    if (dismiss) dismiss.addEventListener('click', closeModal);
    if (modal) modal.addEventListener('click', function(e){ if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', function(e){ if (e.key === 'Escape' && !modal.hidden) closeModal(); });
  })();
</script>

  <script src="../../../assets/js/ads.js" defer></script>
</body>
</html>
