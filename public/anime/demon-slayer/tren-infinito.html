<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-adsense-account" content="ca-pub-8480825005176665">
  <title>Demon Slayer - Tren Infinito - StudioOtaku</title>
  <link rel="stylesheet" href="../../../css/server-selector.css">
  <link rel="stylesheet" href="../../../css/temporadas.css">
  <link rel="stylesheet" href="../../../css/style.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8480825005176665" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../../../css/anime.css">
  <link rel="stylesheet" href="../../../css/responsive-style.css">
  <link rel="stylesheet" href="../../../css/responsive-navigation.css">
  <link rel="icon" type="image/png" href="../../../ico/logo.png">
  <link rel="apple-touch-icon" href="../../../ico/logo.png">
  <link rel="shortcut icon" href="../../../ico/logo.png">
  <style>
    .main-content { display: flex; gap: 20px; align-items: flex-start; }
    .left-content { flex: 3; }
    .right-content { flex: 1; }
    .back-btn { display: inline-block; margin: 12px 0; padding: 10px 16px; background: #6c63ff; color: #fff; border-radius: 8px; text-decoration: none; }
    .right-content .popular-item { display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.03); margin-bottom: 10px; cursor: pointer; }
    .right-content .popular-item:hover { background: rgba(255,255,255,0.06); }
    .right-content .popular-item img { width: 120px; height: 72px; object-fit: cover; border-radius: 6px; display: block; }
    .right-content .popular-item .title { font-size: 0.95rem; line-height: 1.3; color: #fff; }
    .reproductor-video iframe { width: 100%; height: 480px; border: none; }
    .player-frame-wrap { background: #111; border-radius: 12px; overflow: hidden; }
    .footer { margin-top: 28px; padding: 16px 0; background: rgba(255,255,255,0.04); border-top: 1px solid rgba(255,255,255,0.08); }
    .footer .footer-content { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .footer .footer-section h3 { margin: 0 0 8px; }
    .footer .footer-section p { margin: 0; opacity: 0.85; }
    .footer .footer-section ul { list-style: none; padding: 0; margin: 0; }
    .footer .footer-section ul li { margin: 6px 0; }
    .footer .footer-section a { color: #fff; text-decoration: none; }
    .footer .footer-section a:hover { text-decoration: underline; }
    .footer .social-links { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
    @media (min-width:768px){ .footer .social-links { grid-template-columns: repeat(4, 1fr); } }
    .footer .social-item { display: flex; align-items: center; gap: 8px; background: #111; border-radius: 10px; padding: 10px; text-decoration: none; color: #fff; }
    .footer .social-item:hover { background: #1a1a1a; }
    .footer .social-item img { width: 22px; height: 22px; border-radius: 4px; object-fit: cover; }
    .footer .social-item span { line-height: 1; }
    .footer .footer-text { text-align: center; margin-top: 12px; opacity: 0.8; }
    @media (max-width:768px){ .footer .footer-content { grid-template-columns: 1fr; } }
  </style>
  <style>
    .header + main.container { padding-top: 6rem; }
  </style>
</head>
<body>
  <header class="header">
    <nav class="nav-container">
      <div class="logo"><img src="../../../ico/logo.png" alt="Mundo Otaku Latino" style="height:28px; vertical-align:middle; margin-right:8px;">Mundo Otaku Latino</div>
      <ul class="nav-menu">
        <li><a href="../../index.html#inicio">Inicio</a></li>
        <li><a href="../../html/catalogo.html">Anime</a></li>
        <li><a href="#peliculas">Pel√≠culas</a></li>
        <li><a href="#generos">G√©neros</a></li>
        <li><a href="https://exe.io/ANIMETV" target="_blank">APK</a></li>
      </ul>
    </nav>
  </header>

  <main class="container">
    <div class="main-content">
      <a href="../../html/catalogo.html" class="back-btn">Volver al Cat√°logo</a>
      <div class="left-content">
        <div class="title-container">
          <h1 class="season-title">Demon Slayer - Tren Infinito</h1>
          <h2 class="episode-title" id="current-episode-title">Episodio 1</h2>
        </div>
        <div class="description">
          <p>Selecciona episodio e idioma, luego un servidor. Disponibles MixDrop y StreamTape.</p>
        </div>

        <div class="contenedor-video">
          <section class="player-selector" aria-label="Selector de idioma y servidor">
            <div class="language-toggle" role="tablist" aria-label="Idiomas disponibles">
              <button class="lang-btn" role="tab" aria-selected="false" data-language="lat">
                <img src="../../../ico/LAT.png" alt="Latino">
                <span>Latino</span>
              </button>
              <button class="lang-btn" role="tab" aria-selected="false" data-language="sub">
                <img src="../../../ico/SUB.png" alt="Subtitulado">
                <span>Subtitulado</span>
              </button>
            </div>

            <div class="server-grid" aria-label="Servidores disponibles">
              <a href="#" class="server-card" data-server="Filemoon" data-url-lat="#" data-url-sub="#" aria-label="Filemoon">
                <img src="../../../ico/FILEMOON.png" alt="Filemoon">
                <span>Filemoon</span>
              </a>
              <a href="#" class="server-card" data-server="StreamWish" data-url-lat="#" data-url-sub="#" aria-label="StreamWish">
                <img src="../../../ico/STREAMWISH.png" alt="StreamWish">
                <span>StreamWish</span>
              </a>
              <a href="#" class="server-card" data-server="MixDrop" data-url-lat="#" data-url-sub="#" aria-label="MixDrop">
                <img src="../../../ico/mixdrop.webp" alt="MixDrop">
                <span>MixDrop</span>
              </a>
              <a href="#" class="server-card" data-server="StreamTape" data-url-lat="#" data-url-sub="#" aria-label="StreamTape">
                <img src="../../../ico/streamtape.png" alt="StreamTape">
                <span>StreamTape</span>
              </a>
              <a href="#" class="server-card" data-server="Netu" data-url-lat="#" data-url-sub="#" aria-label="Netu">
                <img src="../../../ico/netu.png" alt="Netu">
                <span>Netu</span>
              </a>
              <a href="#" class="server-card" data-server="Uqload" data-url-lat="#" data-url-sub="#" aria-label="Uqload">
                <img src="../../../ico/UQLOAD.webp" alt="Uqload">
                <span>Uqload</span>
              </a>
              <a href="#" class="server-card" data-server="HGLINK" data-url-lat="#" data-url-sub="#" aria-label="HGLINK">
                <img src="../../../ico/HGLINK.png" alt="HGLINK">
                <span>HGLINK</span>
              </a>
              <a href="#" class="server-card" data-server="EarnVids" data-url-lat="#" data-url-sub="#" aria-label="EarnVids">
                <img src="../../../ico/earnvids.jpg" alt="EarnVids">
                <span>EarnVids</span>
              </a>
              <a href="#" class="server-card" data-server="LULU VDO" data-url-lat="#" data-url-sub="#" aria-label="LULU VDO">
                <img src="../../../ico/LULUVDO.webp" alt="LULU VDO">
                <span>LULU VDO</span>
              </a>
              <a href="#" class="server-card" data-server="HexUpload" data-url-lat="#" data-url-sub="#" aria-label="HexUpload">
                <img src="../../../ico/HEXUPLOAD.png" alt="HexUpload">
                <span>HexUpload</span>
              </a>
            </div>

            <div class="player-frame-wrap">
              <iframe id="player-frame" title="Reproductor" src="about:blank" allow="autoplay" allowfullscreen loading="lazy"></iframe>
            </div>
          </section>
        </div>

        <section class="navigation-buttons" aria-label="Navegaci√≥n de episodios" style="display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; column-gap:10px; margin:12px 0;">
          <button id="prev-ep" class="nav-btn" disabled style="padding:10px 16px; border-radius:8px; background:#2c2c2c; color:#bbb; border:none; justify-self:start;">‚óÑ episodio anterior</button>
          <button id="toggle-episodes" class="nav-btn" aria-expanded="false" style="padding:10px 16px; border-radius:8px; background:#6c63ff; color:#fff; border:none; justify-self:center;">lista de episodios</button>
          <button id="next-ep" class="nav-btn" disabled style="padding:10px 16px; border-radius:8px; background:#2c2c2c; color:#bbb; border:none; justify-self:end;">siguiente episodio ‚ñ∫</button>
        </section>

        <div class="description">
          <p>Contenido disponible: Episodios 1‚Äì7, versi√≥n Sub titulada y Pel√≠cula.</p>
        </div>

        <div class="episodes-container" id="episodes-container" hidden>
          <h3 style="text-align:center; margin-bottom: 1.5rem; font-size: 1.8rem;">Episodios</h3>
          <div class="episodes-grid" id="episodes-grid"></div>
        </div>

        <section class="download-servers-section" aria-label="Enlaces de descarga" style="margin-top:18px;">
          <div class="servers-title" style="font-weight:700; margin-bottom:8px;">Descargas</div>
          <a href="./descargar-treninfinito.html" class="download-link" style="background:#27ae60; color:#fff; padding:10px 14px; border-radius:8px; display:inline-block;">Descargar Tren Infinito</a>
        </section>
      </div>

      <div class="right-content">
        <h3>Popular</h3>
        <div class="popular-item" onclick="window.location.href='../../../public/anime/spy-x-family/spy-x-family.html'">
          <img src="../../../img/Spy x Family S1.jpg" alt="Spy x Family">
          <div class="title">Spy x Family - Temporada 1</div>
        </div>
        <div class="popular-item" onclick="window.location.href='../../../public/anime/chainsaw-man/chainsaw-man.html'">
          <img src="../../../img/Chainsaw Man S1.jpg" alt="Chainsaw Man">
          <div class="title">Chainsaw Man - Temporada 1</div>
        </div>
        <div class="popular-item" onclick="window.location.href='../../../public/anime/attack-on-titan/attack-on-titan.html'">
          <img src="../../../img/Attack on Titan S4.jpg" alt="Attack on Titan">
          <div class="title">Attack on Titan - Temporada 4</div>
        </div>
        <div class="popular-item" onclick="window.location.href='../../../public/anime/jujutsu-kaisen/jujutsu-kaisen.html'">
          <img src="../../../img/Jujutsu Kaisen S1.jpg" alt="Jujutsu Kaisen">
          <div class="title">Jujutsu Kaisen - Temporada 1</div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>StudioOtaku</h3>
          <p>Tu plataforma favorita para ver anime en espa√±ol latino</p>
        </div>
        <div class="footer-section">
          <h3>Enlaces</h3>
          <ul>
            <li><a href="../../index.html#inicio">Inicio</a></li>
            <li><a href="../../html/catalogo.html">üóÇÔ∏è Cat√°logo</a></li>
            <li><a href="#generos">G√©neros</a></li>
            <li><a href="https://exe.io/ANIMETV" target="_blank">Aplicaci√≥n APK</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>S√≠guenos</h3>
          <div class="social-links" aria-label="Redes sociales y canales oficiales">
            <a class="social-item" href="https://exe.io/ANIMETV" target="_blank" rel="noopener" aria-label="APP Anime TV">
              <img src="../../../ico/logo.png" alt="APP Anime TV" />
              <span>APP Anime TV</span>
            </a>
            <a class="social-item" href="https://t.me/Mundoootakulatino" target="_blank" rel="noopener" aria-label="Canal de Telegram">
              <img src="../../../ico/telegram.webp" alt="Telegram" />
              <span>Canal Telegram</span>
            </a>
            <a class="social-item" href="https://www.youtube.com/@STUDIOOTAKU1" target="_blank" rel="noopener" aria-label="YouTube">
              <img src="../../../ico/youtube.png" alt="YouTube" />
              <span>YouTube</span>
            </a>
          </div>
        </div>
      </div>
      <p class="footer-text">&copy; 2025 StudioOtaku. Todos los derechos reservados.</p>
    </div>
  </footer>

  <script src="../../../assets/js/server-selector.js"></script>
  <script>
    function normalizeUrl(url) { return url || ''; }
    function mixdropFallback(url) {
      if (!url) return '';
      const m = url.match(/https?:\/\/mxdrop\.to\/e\/([^\/?#]+)/i);
      return m ? `https://mdy48tn97.com/e/${m[1]}` : '';
    }
    let currentEpisode = null;
    const episodes = [
      { num: 1, title: "Tren Infinito 01", latMix: "https://mxdrop.to/e/owzqeqx9tl6jz9q", latStp: "https://streamtape.com/e/6Qb0PxQeeoT9RoO/Kimetsu_no_Yaiba_Tren_Infino_01.mp4" },
      { num: 2, title: "Tren Infinito 02", latMix: "https://mxdrop.to/e/l79jzvxnfqdpnkm", latStp: "https://streamtape.com/e/qObqdQakBZFyBY/Kimetsu_no_Yaiba_Tren_Infino_02.mp4" },
      { num: 3, title: "Tren Infinito 03", latMix: "https://mxdrop.to/e/mkzvevneuqdx83", latStp: "https://streamtape.com/e/g9ZzL3Xb99Tq133/Kimetsu_no_Yaiba_Tren_Infino_03.mp4" },
      { num: 4, title: "Tren Infinito 04", latMix: "https://mxdrop.to/e/dkrx0xq9tv4wpm", latStp: "https://streamtape.com/e/JYQPzw9eY1Ijzr0/Kimetsu_no_Yaiba_Tren_Infino_04.mp4" },
      { num: 5, title: "Tren Infinito 05", latMix: "https://mxdrop.to/e/xw9ere73b0n79", latStp: "https://streamtape.com/e/PypeQPdAm6F0d6O/Kimetsu_no_Yaiba_Tren_Infino_05.mp4" },
      { num: 6, title: "Tren Infinito 06", latMix: "https://mxdrop.to/e/elz8789daerrev", latStp: "https://streamtape.com/e/J01LxaLmkqUjkXx/Kimetsu_no_Yaiba_Tren_Infino_06.mp4" },
      { num: 7, title: "Tren Infinito 07", latMix: "https://mxdrop.to/e/4d9kxkw6fwk7q8", latStp: "https://streamtape.com/e/rBJwoB0V9WiM9d/Kimetsu_no_Yaiba_Tren_Infino_07.mp4" },
      { num: 8, title: "Tren Infinito Subtitulado", subMix: "https://mxdrop.to/e/l798zwmzcqrqdm9", subStp: "https://streamtape.com/e/zpPjWrLKB7UYMAK/tren_infinito_sub_titulada.mp4" },
      { num: 9, title: "Pel√≠cula", latStp: "https://streamtape.com/e/39XeLYvOWdhdZPj/Kimetsu_no_Yaiba_Tren_Infino_movie.mp4" }
    ];
    const episodesGrid = document.getElementById('episodes-grid');
    episodes.forEach(episode => {
      const episodeBtn = document.createElement('button');
      episodeBtn.className = 'episode-btn';
      episodeBtn.textContent = `Ep ${episode.num}`;
      episodeBtn.onclick = () => loadEpisode(episode);
      episodesGrid.appendChild(episodeBtn);
    });
    function applyEpisodeToServerGrid(ep) {
      const mixdropCard = document.querySelector('.server-card[data-server="MixDrop"]');
      const streamTapeCard = document.querySelector('.server-card[data-server="StreamTape"]');
      const otherCards = document.querySelectorAll('.server-card:not([data-server="MixDrop"]):not([data-server="StreamTape"])');
      const latMix = normalizeUrl(ep.latMix || '');
      const subMix = normalizeUrl(ep.subMix || '');
      const latStp = normalizeUrl(ep.latStp || '');
      const subStp = normalizeUrl(ep.subStp || '');
      if (mixdropCard) {
        mixdropCard.setAttribute('data-url-lat', latMix || '#');
        mixdropCard.setAttribute('data-url-sub', subMix || '#');
        const fbLat = mixdropFallback(latMix);
        if (fbLat) { mixdropCard.setAttribute('data-fallback-lat', fbLat); } else { mixdropCard.removeAttribute('data-fallback-lat'); }
      }
      if (streamTapeCard) {
        streamTapeCard.setAttribute('data-url-lat', latStp || '#');
        streamTapeCard.setAttribute('data-url-sub', subStp || '#');
      }
      otherCards.forEach(card => {
        card.setAttribute('data-url-lat', '#');
        card.setAttribute('data-url-sub', '#');
      });
    }
    function loadEpisode(episode) {
      document.querySelectorAll('.episode-btn').forEach((btn, index) => { btn.classList.toggle('active', index + 1 === episode.num); });
      document.getElementById('current-episode-title').textContent = `Episodio ${episode.num}${episode.title ? ': ' + episode.title : ''}`;
      currentEpisode = episode;
      applyEpisodeToServerGrid(episode);
      try {
        const activeLangBtn = document.querySelector('.lang-btn[aria-selected="true"]');
        if (activeLangBtn) activeLangBtn.click();
      } catch (_) {}
      updateNavState();
    }
    function updateNavState() {
      const prev = document.getElementById('prev-ep');
      const next = document.getElementById('next-ep');
      if (!prev || !next || !currentEpisode) return;
      prev.disabled = currentEpisode.num <= 1;
      next.disabled = currentEpisode.num >= episodes.length;
      prev.style.background = prev.disabled ? '#2c2c2c' : '#6c63ff';
      prev.style.color = prev.disabled ? '#bbb' : '#fff';
      next.style.background = next.disabled ? '#2c2c2c' : '#6c63ff';
      next.style.color = next.disabled ? '#bbb' : '#fff';
    }
    const prevBtn = document.getElementById('prev-ep');
    const nextBtn = document.getElementById('next-ep');
    if (prevBtn) { prevBtn.addEventListener('click', () => { if (!currentEpisode) return; const idx = currentEpisode.num - 2; if (idx >= 0) loadEpisode(episodes[idx]); }); }
    if (nextBtn) { nextBtn.addEventListener('click', () => { if (!currentEpisode) return; const idx = currentEpisode.num; if (idx < episodes.length) loadEpisode(episodes[idx]); }); }
    const toggleBtn = document.getElementById('toggle-episodes');
    const episodesBox = document.getElementById('episodes-container');
    if (toggleBtn && episodesBox) {
      toggleBtn.addEventListener('click', () => {
        const isHidden = episodesBox.hasAttribute('hidden');
        if (isHidden) { episodesBox.removeAttribute('hidden'); toggleBtn.setAttribute('aria-expanded', 'true'); episodesBox.scrollIntoView({ behavior: 'smooth', block: 'start' }); }
        else { episodesBox.setAttribute('hidden', ''); toggleBtn.setAttribute('aria-expanded', 'false'); window.scrollTo({ top: 0, behavior: 'smooth' }); }
      });
    }
    const langBtns = document.querySelectorAll('.lang-btn');
    langBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const lang = btn.dataset.language;
        const hasLinks = (ep) => {
          if (!ep) return false;
          if (lang === 'sub') return Boolean(normalizeUrl(ep.subMix || '') || normalizeUrl(ep.subStp || ''));
          return Boolean(normalizeUrl(ep.latMix || '') || normalizeUrl(ep.latStp || ''));
        };
        if (!hasLinks(currentEpisode)) {
          const target = episodes.find(e => hasLinks(e)) || episodes[0];
          loadEpisode(target);
          try { btn.click(); } catch (_) {}
        }
      });
    });
  </script>
  <script src="../../../assets/js/ads.js" defer></script>
</body>
</html>









